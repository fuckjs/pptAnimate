<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="css/main.css">
	<script src="js/jQuery-2.1.4.min.js"></script>
</head>
<body>
	<div class="BG-panel">
		<div class="circle-lg"></div>
		<div class="circle-left circle-sm"></div>
		<div class="circle-right circle-sm"></div>
		<div class="line-lg"></div>

		<p class="title-sm text1 ">2016年</p>

        <p class="title-sm text2 ">1月25日10点</p>

        <p class="title-sm text3 ">累计注册商户数量</p>
		<p class="title-lg text4  "><span id="text-num">10.0</span>万</p>

        <p class="text5" style="text-align: center">积累交易</p>

        <p class="text6"><span id="text6-num">10.0</span>万<span class="text-little">笔</span></p>
        <p class="text7"><span id="text7-num">888</span>万<span class="text-little">元</span></p>
	</div>
</body>
<script>
	//判断浏览器是否支持动画
    getVendorPrefix();
    function getVendorPrefix() {
        var agent = navigator.userAgent.toLowerCase();
	    if( agent.indexOf(' applewebkit/') <= -1){
	        alert("请用谷歌浏览器或360浏览器极速模式打开");
	    }
    }
    var sleepTime = 5500;//每页动画结束后的停留时间（以500毫秒结尾）
    var lastSleepTime = 1000;//全部动画结束后的停留时间
    var numSleepTime = 3000;//等待时间后数字变动

    $(".circle-left").addClass('circle-left-1');
    $(".circle-right").addClass('circle-right-1');
    $(".line-lg").addClass('line-lg-show-1');
    $(".text1").addClass('text1-1');
    $(".text2").addClass('text2-1');
    $(".text3").addClass('text3-1');
    $(".text4").addClass('text4-1');

    setTimeout(function () {
        numAnimation('#text-num', 10.1, 31.3, 1, 30.0, 0.1, 31.0, 0.1, 0.1, 1);
    }, numSleepTime);


    function ddd1(){
    	//第一页收起
    	setTimeout(function(){
    		$(".circle-left").removeClass('circle-left-1').addClass('circle-left-2');
    		$(".circle-right").removeClass('circle-right-1').addClass('circle-right-2');
    		$(".line-lg").removeClass('line-lg-show-1').addClass('line-lg-show-2');
    		$(".text1").removeClass('text1-1').addClass('text1-2');
		    $(".text2").removeClass('text2-1').addClass('text2-2');
		    $(".text3").removeClass('text3-1').addClass('text3-2');
		    $(".text4").removeClass('text4-1').addClass('text4-2');
			$('.BG-panel').addClass('BG-panel-1');
		    setTimeout(function(){
		    	$('.circle-lg').addClass('circle-lg-1');
		    	$('.BG-panel').removeClass('BG-panel-1').addClass('BG-panel-2');

		    	setTimeout(function(){
		    		$("body").css("background-image","url(img/bg-red.png)");
		    		$('.circle-lg').removeClass('circle-lg-1').css({
                        'border-color': '#d7d7d7',
                        'background-color': '#ffffff'
                    });
                    $('.circle-sm').addClass('circle-sm-2');

                    //第二页展开
                    setTimeout(function(){
                    	$('.circle-right').removeClass('circle-right-2').addClass('circle-right-1');
                    	$('.circle-left').removeClass('circle-left-2').addClass('circle-left-1');
                    	$('.line-lg').removeClass('line-lg-show-2').addClass('line-lg-show-1');
	                    $('.text1').removeClass('text1-2').addClass('text1-1').css('color', '#ffffff');
	                    $('.text2').removeClass('text2-2').addClass('text2-1').css('color', '#ffffff');

	                    $('.text5, .text6, .text7').show();
	                    $('.text5').addClass('text5-1');
	                    $('.text6').addClass('text6-1');
	                    $('.text7').addClass('text7-1');

	                    setTimeout(function () {
	                        numAnimation('#text6-num', 10.1, 49.3, 1, 48.0, 0.1, 49.0, 0.1, 0.1);
	                        numAnimation('#text7-num', 1585, 39661, 0, 39448, 111, 39650, 11, 1, 2);
	                    }, numSleepTime);
                    },400)
		    	},300);
		    },1000)
    	},sleepTime);
    }
    
    function numAnimation(f, g, h, i, j, k, l, m, n, o) {//元素、开始值、结束值、小数点位数、1值、1速度、2值、2速度、3速度、回调函数
        var num = g;
        var a = setInterval(function () {
            $(f).text(num.toFixed(i));
            if (num < j) {
                num = (num + k);
            } else {
                clearInterval(a);
                bb();
            }
        }, 5);

        function bb() {
            var b = setInterval(function () {
                $(f).text(num.toFixed(i));
                if (num < l) {
                    num = (num + m);
                } else {
                    clearInterval(b);
                    cc();
                }
            }, 50);
        }

        function cc() {
            var c = setInterval(function () {
                $(f).text(num.toFixed(i));
                if (num < h) {
                    num = (num + n);
                } else {
                   switch (o){
                        case 1:
                            ddd1();
                            break;
                        case 2:
                            //ddd2();
                            break;
                        case 3:
                            //ddd3();
                            break;
                        default : break;
                    }
                    clearInterval(c);
                }
            }, 200);
        }

    }
</script>
</html>